---
// Minimal wrapper that extends Starlight's original Header with ProgressScroll.
import Header from "@astrojs/starlight/components/Header.astro";
import ProgressScroll from "../components/ProgressScroll.astro";
import config from 'virtual:starlight/user-config';

// Hide progress scroll on the home page only (works with any base URL and locales).
const baseUrl = import.meta.env.BASE_URL || "/";
const normalizedPath = Astro.url.pathname.endsWith("/")
  ? Astro.url.pathname
  : Astro.url.pathname + "/";
const normalizedBase = baseUrl.endsWith("/") ? baseUrl : baseUrl + "/";

// Check if we're on the home page.
let isHomePage = normalizedPath === normalizedBase;

// If multilingual, also check if we're on a localized home page.
if (config.isMultilingual && Astro.currentLocale) {
  const localeHomePath = normalizedBase + Astro.currentLocale + "/";
  isHomePage = isHomePage || normalizedPath === localeHomePath;
}

const displayProgressScroll = !isHomePage;
---

<Header {...Astro.props} />
{displayProgressScroll && <ProgressScroll />}