import { FetchPackageRegistry } from './package.mjs';
// const escapeImport = new Function('m', 'return import(m)');
// const { default: request } = await escapeImport('sync-request-curl');
export class NodeFetchPackageRegistry extends FetchPackageRegistry {
    request;
    constructor(am, request) {
        super(am);
        this.request = request;
    }
    pullPackageData(path) {
        const response = this.request('GET', this.resolvePath(path));
        if (response.statusCode === 200) {
            return response.getBody(undefined);
        }
        return undefined;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZS5ub2RlLm1qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9mcy9wYWNrYWdlLm5vZGUubXRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUdyRCw4REFBOEQ7QUFDOUQsd0VBQXdFO0FBRXhFLE1BQU0sT0FBTyx3QkFBeUIsU0FBUSxvQkFBb0I7SUFHdEQ7SUFGVixZQUNFLEVBQXVCLEVBQ2YsT0FBWTtRQUVwQixLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFGRixZQUFPLEdBQVAsT0FBTyxDQUFLO0lBR3RCLENBQUM7SUFFRCxlQUFlLENBQUMsSUFBaUI7UUFDL0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRTdELElBQUksUUFBUSxDQUFDLFVBQVUsS0FBSyxHQUFHLEVBQUUsQ0FBQztZQUNoQyxPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDckMsQ0FBQztRQUNELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUGFja2FnZVNwZWMgfSBmcm9tICcuLi9pbnRlcm5hbC50eXBlcy5tanMnO1xyXG5pbXBvcnQgeyBGZXRjaFBhY2thZ2VSZWdpc3RyeSB9IGZyb20gJy4vcGFja2FnZS5tanMnO1xyXG5pbXBvcnQgdHlwZSB7IFdyaXRhYmxlQWNjZXNzTW9kZWwgfSBmcm9tICcuL2luZGV4Lm1qcyc7XHJcblxyXG4vLyBjb25zdCBlc2NhcGVJbXBvcnQgPSBuZXcgRnVuY3Rpb24oJ20nLCAncmV0dXJuIGltcG9ydChtKScpO1xyXG4vLyBjb25zdCB7IGRlZmF1bHQ6IHJlcXVlc3QgfSA9IGF3YWl0IGVzY2FwZUltcG9ydCgnc3luYy1yZXF1ZXN0LWN1cmwnKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBOb2RlRmV0Y2hQYWNrYWdlUmVnaXN0cnkgZXh0ZW5kcyBGZXRjaFBhY2thZ2VSZWdpc3RyeSB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBhbTogV3JpdGFibGVBY2Nlc3NNb2RlbCxcclxuICAgIHByaXZhdGUgcmVxdWVzdDogYW55LFxyXG4gICkge1xyXG4gICAgc3VwZXIoYW0pO1xyXG4gIH1cclxuXHJcbiAgcHVsbFBhY2thZ2VEYXRhKHBhdGg6IFBhY2thZ2VTcGVjKTogVWludDhBcnJheSB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IHRoaXMucmVxdWVzdCgnR0VUJywgdGhpcy5yZXNvbHZlUGF0aChwYXRoKSk7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2UuZ2V0Qm9keSh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcbn1cclxuIl19