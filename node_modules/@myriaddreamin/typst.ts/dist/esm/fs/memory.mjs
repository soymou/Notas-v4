export class MemoryAccessModel {
    mTimes = new Map();
    mData = new Map();
    constructor() { }
    reset() {
        this.mTimes.clear();
        this.mData.clear();
    }
    insertFile(path, data, mtime) {
        this.mTimes.set(path, mtime);
        this.mData.set(path, data);
    }
    removeFile(path) {
        this.mTimes.delete(path);
        this.mData.delete(path);
    }
    getMTime(path) {
        if (!path.startsWith('/@memory/')) {
            return undefined;
        }
        if (this.mTimes.has(path)) {
            return this.mTimes.get(path);
        }
        return undefined;
    }
    isFile() {
        return true;
    }
    getRealPath(path) {
        return path;
    }
    readAll(path) {
        if (!path.startsWith('/@memory/')) {
            return undefined;
        }
        if (this.mData.has(path)) {
            return this.mData.get(path);
        }
        return undefined;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVtb3J5Lm1qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9mcy9tZW1vcnkubXRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE1BQU0sT0FBTyxpQkFBaUI7SUFDNUIsTUFBTSxHQUFrQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2xELEtBQUssR0FBd0MsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUN2RCxnQkFBZSxDQUFDO0lBRWhCLEtBQUs7UUFDSCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELFVBQVUsQ0FBQyxJQUFZLEVBQUUsSUFBZ0IsRUFBRSxLQUFXO1FBQ3BELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVELFVBQVUsQ0FBQyxJQUFZO1FBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRCxRQUFRLENBQUMsSUFBWTtRQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBQ2xDLE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDMUIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMvQixDQUFDO1FBQ0QsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUVELE1BQU07UUFDSixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxXQUFXLENBQUMsSUFBWTtRQUN0QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxPQUFPLENBQUMsSUFBWTtRQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBQ2xDLE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDekIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QixDQUFDO1FBRUQsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRnNBY2Nlc3NNb2RlbCB9IGZyb20gJy4uL2ludGVybmFsLnR5cGVzLm1qcyc7XHJcbmltcG9ydCB7IFdyaXRhYmxlQWNjZXNzTW9kZWwgfSBmcm9tICcuL2luZGV4Lm1qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVtb3J5QWNjZXNzTW9kZWwgaW1wbGVtZW50cyBGc0FjY2Vzc01vZGVsLCBXcml0YWJsZUFjY2Vzc01vZGVsIHtcclxuICBtVGltZXM6IE1hcDxzdHJpbmcsIERhdGUgfCB1bmRlZmluZWQ+ID0gbmV3IE1hcCgpO1xyXG4gIG1EYXRhOiBNYXA8c3RyaW5nLCBVaW50OEFycmF5IHwgdW5kZWZpbmVkPiA9IG5ldyBNYXAoKTtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5tVGltZXMuY2xlYXIoKTtcclxuICAgIHRoaXMubURhdGEuY2xlYXIoKTtcclxuICB9XHJcblxyXG4gIGluc2VydEZpbGUocGF0aDogc3RyaW5nLCBkYXRhOiBVaW50OEFycmF5LCBtdGltZTogRGF0ZSkge1xyXG4gICAgdGhpcy5tVGltZXMuc2V0KHBhdGgsIG10aW1lKTtcclxuICAgIHRoaXMubURhdGEuc2V0KHBhdGgsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRmlsZShwYXRoOiBzdHJpbmcpIHtcclxuICAgIHRoaXMubVRpbWVzLmRlbGV0ZShwYXRoKTtcclxuICAgIHRoaXMubURhdGEuZGVsZXRlKHBhdGgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TVRpbWUocGF0aDogc3RyaW5nKTogRGF0ZSB8IHVuZGVmaW5lZCB7XHJcbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnL0BtZW1vcnkvJykpIHtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5tVGltZXMuaGFzKHBhdGgpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1UaW1lcy5nZXQocGF0aCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgaXNGaWxlKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBnZXRSZWFsUGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHBhdGg7XHJcbiAgfVxyXG5cclxuICByZWFkQWxsKHBhdGg6IHN0cmluZyk6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQge1xyXG4gICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoJy9AbWVtb3J5LycpKSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubURhdGEuaGFzKHBhdGgpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1EYXRhLmdldChwYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxufVxyXG4iXX0=